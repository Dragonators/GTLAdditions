package com.gtladd.gtladditions.data.recipes

import com.gregtechceu.gtceu.api.GTValues
import com.gregtechceu.gtceu.api.data.chemical.material.Material
import com.gregtechceu.gtceu.api.data.tag.TagPrefix.*
import com.gregtechceu.gtceu.common.data.GTMachines
import com.gregtechceu.gtceu.common.data.GTMaterials.*
import com.gregtechceu.gtceu.common.data.GTRecipeTypes.ASSEMBLY_LINE_RECIPES
import com.gtladd.gtladditions.GTLAdditions
import net.minecraft.data.recipes.FinishedRecipe
import org.gtlcore.gtlcore.common.data.GTLBlocks
import org.gtlcore.gtlcore.common.data.GTLMaterials.*
import org.gtlcore.gtlcore.utils.Registries.getItemStack
import java.util.*
import java.util.function.Consumer

object AssemblyLine {
    private val wire = arrayOf<Material?>(SamariumIronArsenicOxide, IndiumTinBariumTitaniumCuprate, UraniumRhodiumDinaquadide, EnrichedNaquadahTriniumEuropiumDuranide, RutheniumTriniumAmericiumNeutronate, Enderite, Echoite, Legendarium, DraconiumAwakened, Infinity)
    private val cable = arrayOf<Material?>(Graphene, NiobiumTitanium, Trinium, NaquadahAlloy, Mendelevium, Mithril, Adamantine, NaquadriaticTaranium, Starmetal, CosmicNeutronium)

    @JvmStatic
    fun init(provider : Consumer<FinishedRecipe?>) {
        addLaserHatchRecipe(provider)
    }

    private fun addLaserHatchRecipe(provider : Consumer<FinishedRecipe?>) {
        for (i in GTValues.IV .. 14) {
            val tier = GTValues.VN[i].lowercase(Locale.getDefault())
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_16777216a_laser_source_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtceu:" + tier + "_4194304a_laser_source_hatch"))
                .inputItems(lens, NetherStar, 64)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(64))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(64))
                .inputItems(wireGtQuadruple, wire[i - 5], 16)
                .inputItems(cableGtQuadruple, cable[i - 5], 16)
                .circuitMeta(1)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtceu:" + tier + "_16777216a_laser_source_hatch"))
                .save(provider)
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_67108863a_laser_source_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtceu:" + tier + "_4194304a_laser_source_hatch"))
                .inputItems(lens, NetherStar, 256)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(256))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(256))
                .inputItems(wireGtQuadruple, wire[i - 5], 32)
                .inputItems(cableGtQuadruple, cable[i - 5], 32)
                .circuitMeta(2)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtceu:" + tier + "_67108863a_laser_source_hatch"))
                .save(provider)
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_16777216a_laser_target_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtceu:" + tier + "_4194304a_laser_source_hatch"))
                .inputItems(lens, NetherStar, 64)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(64))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(64))
                .inputItems(wireGtQuadruple, wire[i - 5], 16)
                .inputItems(cableGtQuadruple, cable[i - 5], 16)
                .circuitMeta(4)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtceu:" + tier + "_16777216a_laser_target_hatch"))
                .save(provider)
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_67108864a_laser_target_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtceu:" + tier + "_4194304a_laser_source_hatch"))
                .inputItems(lens, NetherStar, 256)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(256))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(256))
                .inputItems(wireGtQuadruple, wire[i - 5], 32)
                .inputItems(cableGtQuadruple, cable[i - 5], 32)
                .circuitMeta(5)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtceu:" + tier + "_67108864a_laser_target_hatch"))
                .save(provider)
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_268435455a_laser_target_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtceu:" + tier + "_4194304a_laser_source_hatch"))
                .inputItems(lens, NetherStar, 1024)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(1024))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(1024))
                .inputItems(wireGtQuadruple, wire[i - 5], 64)
                .inputItems(cableGtQuadruple, cable[i - 5], 64)
                .circuitMeta(6)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtceu:" + tier + "_268435455a_laser_target_hatch"))
                .save(provider)
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_16777216a_wireless_laser_source_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtmthings:" + tier + "_4194304a_wireless_laser_source_hatch"))
                .inputItems(lens, NetherStar, 64)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(64))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(64))
                .inputItems(wireGtQuadruple, wire[i - 5], 16)
                .inputItems(cableGtQuadruple, cable[i - 5], 16)
                .circuitMeta(1)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtmthings:" + tier + "_16777216a_wireless_laser_source_hatch"))
                .save(provider)
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_67108863a_wireless_laser_source_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtmthings:" + tier + "_4194304a_wireless_laser_source_hatch"))
                .inputItems(lens, NetherStar, 256)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(256))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(256))
                .inputItems(wireGtQuadruple, wire[i - 5], 32)
                .inputItems(cableGtQuadruple, cable[i - 5], 32)
                .circuitMeta(2)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtmthings:" + tier + "_67108863a_wireless_laser_source_hatch"))
                .save(provider)
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_16777216a_wireless_laser_target_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtmthings:" + tier + "_4194304a_wireless_laser_target_hatch"))
                .inputItems(lens, NetherStar, 64)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(64))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(64))
                .inputItems(wireGtQuadruple, wire[i - 5], 16)
                .inputItems(cableGtQuadruple, cable[i - 5], 16)
                .circuitMeta(4)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtmthings:" + tier + "_16777216a_wireless_laser_target_hatch"))
                .save(provider)
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_67108864a_wireless_laser_target_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtmthings:" + tier + "_4194304a_wireless_laser_target_hatch"))
                .inputItems(lens, NetherStar, 256)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(256))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(256))
                .inputItems(wireGtQuadruple, wire[i - 5], 32)
                .inputItems(cableGtQuadruple, cable[i - 5], 32)
                .circuitMeta(5)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtmthings:" + tier + "_67108864a_wireless_laser_target_hatch"))
                .save(provider)
            ASSEMBLY_LINE_RECIPES.recipeBuilder(GTLAdditions.id(tier + "_268435455a_wireless_laser_target_hatch"))
                .EUt(GTValues.VA[i].toLong()).duration(200)
                .inputItems(getItemStack("gtmthings:" + tier + "_4194304a_wireless_laser_target_hatch"))
                .inputItems(lens, NetherStar, 1024)
                .inputItems(GTLBlocks.IMPROVED_SUPERCONDUCTOR_COIL.asStack(1024))
                .inputItems(GTMachines.POWER_SUBSTATION.asStack(1024))
                .inputItems(wireGtQuadruple, wire[i - 5], 64)
                .inputItems(cableGtQuadruple, cable[i - 5], 64)
                .circuitMeta(6)
                .inputFluids(SodiumPotassium.getFluid(10000))
                .inputFluids(SolderingAlloy.getFluid(1296))
                .outputItems(getItemStack("gtmthings:" + tier + "_268435455a_wireless_laser_target_hatch"))
                .save(provider)
        }
    }
}
