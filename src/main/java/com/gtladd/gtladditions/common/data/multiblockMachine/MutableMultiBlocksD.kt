package com.gtladd.gtladditions.common.data.multiblockMachine

import com.gregtechceu.gtceu.api.data.chemical.ChemicalHelper
import com.gregtechceu.gtceu.api.data.tag.TagPrefix
import com.gregtechceu.gtceu.api.machine.MultiblockMachineDefinition
import com.gregtechceu.gtceu.api.machine.multiblock.PartAbility
import com.gregtechceu.gtceu.api.pattern.FactoryBlockPattern
import com.gregtechceu.gtceu.api.pattern.Predicates
import com.gregtechceu.gtceu.common.data.GCyMBlocks
import com.gregtechceu.gtceu.common.data.GTBlocks
import com.gregtechceu.gtceu.common.data.GTMaterials
import com.gtladd.gtladditions.api.machine.GTLAddPartAbility
import org.gtlcore.gtlcore.api.pattern.GTLPredicates
import org.gtlcore.gtlcore.common.block.BlockMap
import org.gtlcore.gtlcore.common.data.GTLBlocks
import org.gtlcore.gtlcore.common.data.GTLMaterials
import org.gtlcore.gtlcore.utils.Registries
import java.util.function.Function

@Suppress("DuplicatedCode")
object MutableMultiBlocksD {
    val SUPER_PARTICLE_COLLIDER = Function { definition: MultiblockMachineDefinition ->
        FactoryBlockPattern.start()
            .aisle("                                               ", "                                               ", "                    fcccccf                    ", "                    fcccccf                    ", "                    fcccccf                    ", "                                               ", "                                               ")
            .aisle("                                               ", "                    fcccccf                    ", "                   cceeeeecc                   ", "                   cceeeeecc                   ", "                   cceeeeecc                   ", "                    fcccccf                    ", "                                               ")
            .aisle("                    fcccccf                    ", "                   cceeeeecc                   ", "                ccccceeeeeccccc                ", "                cccdddddddddccc                ", "                ccccceeeeeccccc                ", "                   cceeeeecc                   ", "                    fcccccf                    ")
            .aisle("                    fcccccf                    ", "                ccccceeeeeccccc                ", "              cccccdddddddddccccc              ", "              ccdddddddddddddddcc              ", "              cccccdddddddddccccc              ", "                ccccceeeeeccccc                ", "                    fcccccf                    ")
            .aisle("                    fcccccf                    ", "              ccccccceeeeeccccccc              ", "            ccccdddcceeeeeccdddcccc            ", "            ccdddddddddddddddddddcc            ", "            ccccdddcceeeeeccdddcccc            ", "              ccccccceeeeeccccccc              ", "                    fcccccf                    ")
            .aisle("                                               ", "            ccccccc fcccccf ccccccc            ", "           cccddccccceeeeecccccddccc           ", "           cdddddddcceeeeeccdddddddc           ", "           cccddccccceeeeecccccddccc           ", "            ccccccc fcccccf ccccccc            ", "                                               ")
            .aisle("                                               ", "           ccccc               ccccc           ", "          ccddccccc fcccccf cccccddcc          ", "          cdddddccc fcccccf cccdddddc          ", "          ccddccccc fcccccf cccccddcc          ", "           ccccc               ccccc           ", "                                               ")
            .aisle("                                               ", "          cccc                   cccc          ", "         ccdcccc               ccccdcc         ", "         cddddcc               ccddddc         ", "         ccdcccc               ccccdcc         ", "          cccc                   cccc          ", "                                               ")
            .aisle("                                               ", "         ccc                       ccc         ", "        ccdccc                   cccdcc        ", "        cdddcc                   ccdddc        ", "        ccdccc                   cccdcc        ", "         ccc                       ccc         ", "                                               ")
            .aisle("                                               ", "        ccc                         ccc        ", "       ccdcc                       ccdcc       ", "       cdddc                       cdddc       ", "       ccdcc                       ccdcc       ", "        ccc                         ccc        ", "                                               ")
            .aisle("                                               ", "       ccc                           ccc       ", "      ccdcc                         ccdcc      ", "      cdddc                         cdddc      ", "      ccdcc                         ccdcc      ", "       ccc                           ccc       ", "                                               ")
            .aisle("                                               ", "      ccc                             ccc      ", "     ccdcc                           ccdcc     ", "     cdddc                           cdddc     ", "     ccdcc                           ccdcc     ", "      ccc                             ccc      ", "                                               ")
            .aisle("                                               ", "     ccc                               ccc     ", "    ccdcc                             ccdcc    ", "    cdddc                             cdddc    ", "    ccdcc                             ccdcc    ", "     ccc                               ccc     ", "                                               ")
            .aisle("                                               ", "     ccc                               ccc     ", "    ccdcc                             ccdcc    ", "    cdddc                             cdddc    ", "    ccdcc                             ccdcc    ", "     ccc                               ccc     ", "                                               ")
            .aisle("                                               ", "    ccc                                 ccc    ", "   ccdcc                               ccdcc   ", "   cdddc                               cdddc   ", "   ccdcc                               ccdcc   ", "    ccc                                 ccc    ", "                                               ")
            .aisle("                                               ", "    ccc                                 ccc    ", "   ccdcc                               ccdcc   ", "   cdddc                               cdddc   ", "   ccdcc                               ccdcc   ", "    ccc                                 ccc    ", "                                               ")
            .aisle("                                               ", "   ccc                                   ccc   ", "  ccdcc                                 ccdcc  ", "  cdddc                                 cdddc  ", "  ccdcc                                 ccdcc  ", "   ccc                                   ccc   ", "                                               ")
            .aisle("                                               ", "   ccc                                   ccc   ", "  ccdcc                                 ccdcc  ", "  cdddc                                 cdddc  ", "  ccdcc                                 ccdcc  ", "   ccc                                   ccc   ", "                                               ")
            .aisle("                                               ", "   ccc                                   ccc   ", "  ccdcc                                 ccdcc  ", "  cdddc                                 cdddc  ", "  ccdcc                                 ccdcc  ", "   ccc                                   ccc   ", "                                               ")
            .aisle("                                               ", "  ccc                                     ccc  ", " ccdcc                                   ccdcc ", " cdddc                                   cdddc ", " ccdcc                                   ccdcc ", "  ccc                                     ccc  ", "                                               ")
            .aisle("  fff                                     fff  ", " fcccf                                   fcccf ", "fccdccf                                 fccdccf", "fcdddcf                                 fcdddcf", "fccdccf                                 fccdccf", " fcccf                                   fcccf ", "  fff                                     fff  ")
            .aisle("  ccc                                     ccc  ", " ceeec                                   ceeec ", "ceedeec                                 ceedeec", "cedddec                                 cedddec", "ceedeec                                 ceedeec", " ceeec                                   ceeec ", "  ccc                                     ccc  ")
            .aisle("  ccc                                     ccc  ", " ceeec                                   ceeec ", "ceedeec                                 ceedeec", "cedddec                                 cedddec", "ceedeec                                 ceedeec", " ceeec                                   ceeec ", "  ccc                                     ccc  ")
            .aisle("  ccc                                     ccc  ", " ceeec                                   ceeec ", "ceedeec                                 ceedeec", "cedddec                                 cedddec", "ceedeec                                 ceedeec", " ceeec                                   ceeec ", "  ccc                                     ccc  ")
            .aisle("  ccc                                     ccc  ", " ceeec                                   ceeec ", "ceedeec                                 ceedeec", "cedddec                                 cedddec", "ceedeec                                 ceedeec", " ceeec                                   ceeec ", "  ccc                                     ccc  ")
            .aisle("  ccc                                     ccc  ", " ceeec                                   ceeec ", "ceedeec                                 ceedeec", "cedddec                                 cedddec", "ceedeec                                 ceedeec", " ceeec                                   ceeec ", "  ccc                                     ccc  ")
            .aisle("  fff                                     fff  ", " fcccf                                   fcccf ", "fccdccf                                 fccdccf", "fcdddcf                                 fcdddcf", "fccdccf                                 fccdccf", " fcccf                                   fcccf ", "  fff                                     fff  ")
            .aisle("                                               ", "  ccc                                     ccc  ", " ccdcc                                   ccdcc ", " cdddc                                   cdddc ", " ccdcc                                   ccdcc ", "  ccc                                     ccc  ", "                                               ")
            .aisle("                                               ", "   ccc                                   ccc   ", "  ccdcc                                 ccdcc  ", "  cdddc                                 cdddc  ", "  ccdcc                                 ccdcc  ", "   ccc                                   ccc   ", "                                               ")
            .aisle("                                               ", "   ccc                                   ccc   ", "  ccdcc                                 ccdcc  ", "  cdddc                                 cdddc  ", "  ccdcc                                 ccdcc  ", "   ccc                                   ccc   ", "                                               ")
            .aisle("                                               ", "   ccc                                   ccc   ", "  ccdcc                                 ccdcc  ", "  cdddc                                 cdddc  ", "  ccdcc                                 ccdcc  ", "   ccc                                   ccc   ", "                                               ")
            .aisle("                                               ", "    ccc                                 ccc    ", "   ccdcc                               ccdcc   ", "   cdddc                               cdddc   ", "   ccdcc                               ccdcc   ", "    ccc                                 ccc    ", "                                               ")
            .aisle("                                               ", "    ccc                                 ccc    ", "   ccdcc                               ccdcc   ", "   cdddc                               cdddc   ", "   ccdcc                               ccdcc   ", "    ccc                                 ccc    ", "                                               ")
            .aisle("                                               ", "     ccc                               ccc     ", "    ccdcc                             ccdcc    ", "    cdddc                             cdddc    ", "    ccdcc                             ccdcc    ", "     ccc                               ccc     ", "                                               ")
            .aisle("                                               ", "     ccc                               ccc     ", "    ccdcc                             ccdcc    ", "    cdddc                             cdddc    ", "    ccdcc                             ccdcc    ", "     ccc                               ccc     ", "                                               ")
            .aisle("                                               ", "      ccc                             ccc      ", "     ccdcc                           ccdcc     ", "     cdddc                           cdddc     ", "     ccdcc                           ccdcc     ", "      ccc                             ccc      ", "                                               ")
            .aisle("                                               ", "       ccc                           ccc       ", "      ccdcc                         ccdcc      ", "      cdddc                         cdddc      ", "      ccdcc                         ccdcc      ", "       ccc                           ccc       ", "                                               ")
            .aisle("                                               ", "        ccc                         ccc        ", "       ccdcc                       ccdcc       ", "       cdddc                       cdddc       ", "       ccdcc                       ccdcc       ", "        ccc                         ccc        ", "                                               ")
            .aisle("                                               ", "         ccc                       ccc         ", "        ccdccc                   cccdcc        ", "        cdddcc                   ccdddc        ", "        ccdccc                   cccdcc        ", "         ccc                       ccc         ", "                                               ")
            .aisle("                                               ", "          cccc                   cccc          ", "         ccdcccc               ccccdcc         ", "         cddddcc               ccddddc         ", "         ccdcccc               ccccdcc         ", "          cccc                   cccc          ", "                                               ")
            .aisle("                                               ", "           ccccc               ccccc           ", "          ccddccccc fcccccf cccccddcc          ", "          cdddddccc fcccccf cccdddddc          ", "          ccddccccc fcccccf cccccddcc          ", "           ccccc               ccccc           ", "                                               ")
            .aisle("                                               ", "            ccccccc fcccccf ccccccc            ", "           cccddccccceeeeecccccddccc           ", "           cdddddddcceeeeeccdddddddc           ", "           cccddccccceeeeecccccddccc           ", "            ccccccc fcccccf ccccccc            ", "                                               ")
            .aisle("                    fcccccf                    ", "              ccccccceeeeeccccccc              ", "            ccccdddcceeeeeccdddcccc            ", "            ccdddddddddddddddddddcc            ", "            ccccdddcceeeeeccdddcccc            ", "              ccccccceeeeeccccccc              ", "                    fcccccf                    ")
            .aisle("                    fcccccf                    ", "                ccccceeeeeccccc                ", "              cccccdddddddddccccc              ", "              ccdddddddddddddddcc              ", "              cccccdddddddddccccc              ", "                ccccceeeeeccccc                ", "                    fcccccf                    ")
            .aisle("                    fcccccf                    ", "                   cceeeeecc                   ", "                ccccceeeeeccccc                ", "                cccdddddddddccc                ", "                ccccceeeeeccccc                ", "                   cceeeeecc                   ", "                    fcccccf                    ")
            .aisle("                                               ", "                    fcccccf                    ", "                   cceeeeecc                   ", "                   cceeeeecc                   ", "                   cceeeeecc                   ", "                    fcccccf                    ", "                                               ")
            .aisle("                                               ", "                                               ", "                    fbbbbbf                    ", "                    fbbabbf                    ", "                    fbbbbbf                    ", "                                               ", "                                               ")
            .where("a", Predicates.controller(Predicates.blocks(definition.get())))
            .where("b", Predicates.blocks(GTLBlocks.LAFIUM_MECHANICAL_CASING.get())
                .or(Predicates.autoAbilities(*definition.recipeTypes))
                .or(Predicates.abilities(PartAbility.INPUT_LASER).setMaxGlobalLimited(1))
                .or(Predicates.abilities(PartAbility.PARALLEL_HATCH).setMaxGlobalLimited(1))
                .or(Predicates.abilities(PartAbility.MAINTENANCE).setExactLimit(1))
                .or(Predicates.abilities(GTLAddPartAbility.THREAD_MODIFIER).setMaxGlobalLimited(1)))
            .where("c", Predicates.blocks(GTLBlocks.LAFIUM_MECHANICAL_CASING.get()))
            .where("d", Predicates.blocks(Registries.getBlock("kubejs:aggregatione_core")))
            .where("d", Predicates.blocks(Registries.getBlock("kubejs:accelerated_pipeline")))
            .where("e", Predicates.blocks(GTBlocks.SUPERCONDUCTING_COIL.get()))
            .where("f", Predicates.blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.NaquadahEnriched)))
            .where(" ", Predicates.any())
            .build()
    }

    val ADVANCED_RARE_EARTH_CENTRIFUGAL = Function { definition: MultiblockMachineDefinition ->
        FactoryBlockPattern.start()
            .aisle("   AAAAAA     AAAAAA   ", "     B           B     ", "     B           B     ", "   CCCCC       CCCCC   ", "     B           B     ", "     B           B     ", "   CCCCC       CCCCC   ", "     B           B     ", "     B           B     ", "                       ", "                       ", "                       ", "                       ")
            .aisle("  AADDDDA     ADDDDAA  ", "                       ", "                       ", "  C     C     C     C  ", "                       ", "                       ", "  C     C     C     C  ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ")
            .aisle(" AADDDDDAA   AADDDDDAA ", "  B  D  B     B  D  B  ", "  B  E  B     B  E  B  ", " CB EEE BC   CB EEE BC ", "  B EEE B     B EEE B  ", "  B EEE B     B EEE B  ", " CB EEE BC   CB EEE BC ", "  B EEE B     B EEE B  ", "  B  E  B     B  E  B  ", "                       ", "                       ", "                       ", "                       ")
            .aisle("AADDDDDDDAAAAADDDDDDDAA", "     D           D     ", "   EEEEE       EEEEE   ", "C  EEEEE  C C  EEEEE  C", "   E F E       E F E   ", "   E F E       E F E   ", "C  E F E  C C  E F E  C", "   EEEEE       EEEEE   ", "   EEEEE       EEEEE   ", "                       ", "                       ", "                       ", "                       ")
            .aisle("ADDDDDDDDDDDDDDDDDDDDDA", "    DDD         DDD    ", "   EEEEE       EEEEE   ", "C EEGGGEE C C EEGGGEE C", "  E H H E     E H H E  ", "  E H H E     E H H E  ", "C E H H E C C E H H E C", "  EEGGGEE     EEGGGEE  ", "   EEEEE       EEEEE   ", "    DDD         DDD    ", "     III       III     ", "       IIIIIIIII       ", "                       ")
            .aisle("ADDDDDDDDDDDDDDDDDDDDDA", "B DDDDDDD B B DDDDDDD B", "B EEEEEEE B B EEEEEEE B", "C EEGGGEE C C EEGGGEE C", "B EF G FE B B EF G FE B", "B EF G FE B B EF G FE B", "C EF G FE C C EF G FE C", "B EEGGGEE B B EEGGGEE B", "B EEEGEEE B B EEEGEEE B", "    D A         A D    ", "     AAA       AAA     ", "       AAAAIAAAA       ", "          DDD          ")
            .aisle("ADDDDDDDDDDDDDDDDDDDDDA", "    DDD         DDD    ", "   EEEEE       EEEEE   ", "C EEGGGEE C C EEGGGEE C", "  E H H E     E H H E  ", "  E H H E     E H H E  ", "C E H H E C C E H H E C", "  EEGGGEE     EEGGGEE  ", "   EEEEE       EEEEE   ", "    DDD         DDD    ", "     III       III     ", "       IIIAIAIII       ", "          DDD          ")
            .aisle("ADDDDDDDDDDDDDDDDDDDDDA", "     D           D     ", "   EEEEE       EEEEE   ", "C  EEEEE  C C  EEEEE  C", "   E F E       E F E   ", "   E F E       E F E   ", "C  E F E  C C  E F E  C", "   EEEEE       EEEEE   ", "   EEEEE       EEEEE   ", "                       ", "                       ", "          AIA          ", "          DDD          ")
            .aisle("ADDDDDDDDDDDDDDDDDDDDDA", "  B  D  B  A  B  D  B  ", "  B     B  A  B     B  ", " CB EEE BC A CB EEE BC ", "  B EEE B  A  B EEE B  ", "  B EEE B  A  B EEE B  ", " CB EEE BC A CB EEE BC ", "  B EEE B  A  B EEE B  ", "  B  E  B  A  B  E  B  ", "           A           ", "           A           ", "          AAA          ", "          DDD          ")
            .aisle("AADDDDDDDDDDDDDDDDDDDAA", "          AAA          ", "          AAA          ", "  C     C AAA C     C  ", "          AAA          ", "          AAA          ", "  C     C AAA C     C  ", "          AAA          ", "          AAA          ", "          AAA          ", "          AAA          ", "          AAA          ", "          DDD          ")
            .aisle(" AAAADDDDDDDDDDDDDAAAA ", "     B     A     B     ", "     B     A     B     ", "   CCCCC   A   CCCCC   ", "     B     A     B     ", "     B     A     B     ", "   CCCCC   A   CCCCC   ", "     B     A     B     ", "     B     A     B     ", "           A           ", "           A           ", "          IAI          ", "          DDD          ")
            .aisle("    AADDDDDDDDDDDAA    ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ", "          IAI          ", "          DDD          ")
            .aisle("     ADDDDDDDDDDDA     ", "           B           ", "           B           ", "         CCCCC         ", "           B           ", "           B           ", "         CCCCC         ", "           B           ", "           B           ", "                       ", "                       ", "          IAI          ", "          DDD          ")
            .aisle("     AADDDDDDDDDAA     ", "                       ", "                       ", "        C     C        ", "                       ", "                       ", "        C     C        ", "                       ", "                       ", "                       ", "                       ", "          IAI          ", "                       ")
            .aisle("      AADDDDDDDAA      ", "        B  D  B        ", "        B  E  B        ", "       CB EEE BC       ", "        B EEE B        ", "        B EEE B        ", "       CB EEE BC       ", "        B EEE B        ", "        B  E  B        ", "                       ", "                       ", "          IAI          ", "                       ")
            .aisle("      ADDDDDDDDDA      ", "           D           ", "         EEEEE         ", "      C  EEEEE  C      ", "         E F E         ", "         E F E         ", "      C  E F E  C      ", "         EEEEE         ", "         EEEEE         ", "                       ", "          IAI          ", "          IAI          ", "                       ")
            .aisle("     AADDDDDDDDDAA     ", "          DDD          ", "         EEEEE         ", "      C EEGGGEE C      ", "        E H H E        ", "        E H H E        ", "      C E H H E C      ", "        EEGGGEE        ", "         EEEEE         ", "          DAD          ", "          IAI          ", "                       ", "                       ")
            .aisle("     ADDDDDDDDDDDA     ", "      B DDDDDDD B      ", "      B EEEEEEE B      ", "      C EEGGGEE C      ", "      B EF G FE B      ", "      B EF G FE B      ", "      C EF G FE C      ", "      B EEGGGEE B      ", "      B EEEGEEE B      ", "          DGD          ", "          IAI          ", "                       ", "                       ")
            .aisle("     ADDDDDDDDDDDA     ", "          DDD          ", "         EEEEE         ", "      C EEGGGEE C      ", "        E H H E        ", "        E H H E        ", "      C E H H E C      ", "        EEGGGEE        ", "         EEEEE         ", "          DDD          ", "                       ", "                       ", "                       ")
            .aisle("     ADDDDDDDDDDDA     ", "           D           ", "         EEEEE         ", "      C  EEEEE  C      ", "         E F E         ", "         E F E         ", "      C  E F E  C      ", "         EEEEE         ", "         EEEEE         ", "                       ", "                       ", "                       ", "                       ")
            .aisle("     AADDDDDDDDDAA     ", "        B  D  B        ", "        B     B        ", "       CB EEE BC       ", "        B EEE B        ", "        B EEE B        ", "       CB EEE BC       ", "        B EEE B        ", "        B  E  B        ", "                       ", "                       ", "                       ", "                       ")
            .aisle("      AAADDDDDAAA      ", "                       ", "                       ", "        C     C        ", "                       ", "                       ", "        C     C        ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ")
            .aisle("        AAAAAAA        ", "          ABA          ", "          ABA          ", "         CCCCC         ", "           B           ", "           B           ", "         CCCCC         ", "           B           ", "           B           ", "                       ", "                       ", "                       ", "                       ")
            .aisle("          AAA          ", "          AJA          ", "          AAA          ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ", "                       ")
            .where("J", Predicates.controller(Predicates.blocks(definition.get())))
            .where("A", Predicates.blocks(GTLBlocks.SPS_CASING.get())
                .or(Predicates.autoAbilities(*definition.recipeTypes))
                .or(Predicates.abilities(PartAbility.PARALLEL_HATCH).setMaxGlobalLimited(1))
                .or(Predicates.abilities(PartAbility.MAINTENANCE).setExactLimit(1))
                .or(Predicates.abilities(PartAbility.INPUT_LASER).setExactLimit(1))
                .or(Predicates.abilities(GTLAddPartAbility.THREAD_MODIFIER).setMaxGlobalLimited(1)))
            .where("B", Predicates.blocks(GTLBlocks.DEGENERATE_RHENIUM_CONSTRAINED_CASING.get()))
            .where("C", Predicates.blocks(GTLBlocks.ADVANCED_FUSION_COIL.get()))
            .where("D", Predicates.blocks(GTLBlocks.HYPER_MECHANICAL_CASING.get()))
            .where("E", Predicates.blocks(GTBlocks.CASING_HSSE_STURDY.get()))
            .where("F", Predicates.blocks(GTLBlocks.HYPER_CORE.get()))
            .where("G", Predicates.blocks(Registries.getBlock("kubejs:neutronium_gearbox")))
            .where("H", Predicates.blocks(Registries.getBlock("kubejs:neutronium_pipe_casing")))
            .where("I", Predicates.blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.HastelloyX)))
            .where(" ", Predicates.any())
            .build()
    }

    val COMPONENT_ASSEMBLY_LINE = Function { definition: MultiblockMachineDefinition ->
        FactoryBlockPattern.start()
            .aisle("AAAAAAAAA", "A  NNN  A", "A       A", "A       A", "A       A", "A       A", "AA     AA", " AAAAAAA ", "         ", "         ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GHAAAHG ", "         ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F I   I F", "FJ     JF", "FJ     JF", "AJ     JA", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F  M M  F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "FL     LF", "FL AAA LF", "FL     LF", "FL     LF", "FL  J  LF", "ALL I LLA", "G LLILL G", " GA   AG ", "   KKK   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F I   I F", "FJ     JF", "FJ     JF", "AJ     JA", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "AL     LA", "AL AAA LA", "AL     LA", "AL     LA", "AL  J  LA", "ALL I LLA", "G LLILL G", " GA   AG ", "   KKK   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F I   I F", "FJ     JF", "FJ     JF", "AJ     JA", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "FL     LF", "FL AAA LF", "FL     LF", "FL     LF", "FL  J  LF", "ALL I LLA", "G LLILL G", " GA   AG ", "   KKK   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F I   I F", "FJ     JF", "FJ     JF", "AJ     JA", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "AL     LA", "AL AAA LA", "AL     LA", "AL     LA", "AL  J  LA", "ALL I LLA", "G LLILL G", " GA   AG ", "   KKK   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F I   I F", "FJ     JF", "FJ     JF", "AJ     JA", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "FL     LF", "FL AAA LF", "FL     LF", "FL     LF", "FL  J  LF", "ALL I LLA", "G LLILL G", " GA   AG ", "   KKK   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F I   I F", "FJ     JF", "FJ     JF", "AJ     JA", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "AL     LA", "AL AAA LA", "AL     LA", "AL     LA", "AL  J  LA", "ALL I LLA", "G LLILL G", " GA   AG ", "   KKK   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F I   I F", "FJ     JF", "FJ     JF", "AJ     JA", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "FL     LF", "FL AAA LF", "FL     LF", "FL     LF", "FL  J  LF", "ALL I LLA", "G LLILL G", " GA   AG ", "   KKK   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F I   I F", "FJ     JF", "FJ     JF", "AJ     JA", "G       G", " GA   AG ", "   AKA   ")
            .aisle("AAAAAAAAA", "F       F", "F  AAA  F", "F       F", "F       F", "F       F", "A       A", "G       G", " GHAAAHG ", "         ")
            .aisle("AAAAAAAAA", "A  B B  A", "A  CCC  A", "A  CCC  A", "A       A", "A       A", "AA DDD AA", " AAD~DAA ", "   DDD   ", "         ")
            .where("~", Predicates.controller(Predicates.blocks(definition.get())))
            .where("A", Predicates.blocks(GTLBlocks.IRIDIUM_CASING.get()))
            .where("B", Predicates.blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.TungstenSteel))
                .or(Predicates.abilities(PartAbility.IMPORT_ITEMS))
                .or(Predicates.abilities(PartAbility.IMPORT_FLUIDS)))
            .where("C", Predicates.blocks(GTLBlocks.IRIDIUM_CASING.get())
                .or(Predicates.abilities(PartAbility.IMPORT_ITEMS))
                .or(Predicates.abilities(PartAbility.IMPORT_FLUIDS)))
            .where("D", Predicates.blocks(GTLBlocks.IRIDIUM_CASING.get())
                .or(Predicates.abilities(PartAbility.PARALLEL_HATCH).setExactLimit(1))
                .or(Predicates.abilities(PartAbility.MAINTENANCE).setExactLimit(1))
                .or(Predicates.abilities(GTLAddPartAbility.THREAD_MODIFIER).setMaxGlobalLimited(1)))
            .where("F", Predicates.blocks(GTLBlocks.HSSS_REINFORCED_BOROSILICATE_GLASS.get()))
            .where("G", Predicates.blocks(GTBlocks.FILTER_CASING.get()))
            .where("H", Predicates.blocks(GTLBlocks.IRIDIUM_CASING.get())
                .or(Predicates.abilities(PartAbility.INPUT_ENERGY).setMaxGlobalLimited(2))
                .or(Predicates.abilities(PartAbility.INPUT_LASER).setMaxGlobalLimited(1)))
            .where("I", Predicates.blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTLMaterials.HastelloyN)))
            .where("J", Predicates.blocks(GTLBlocks.ADVANCED_ASSEMBLY_LINE_UNIT.get()))
            .where("K", GTLPredicates.tierCasings(BlockMap.calMap, "CATier"))
            .where("L", Predicates.blocks(GTBlocks.CASING_POLYTETRAFLUOROETHYLENE_PIPE.get()))
            .where("M", Predicates.blocks(ChemicalHelper.getBlock(TagPrefix.frameGt, GTMaterials.TungstenSteel)))
            .where("N", Predicates.blocks(GTLBlocks.IRIDIUM_CASING.get())
                .or(Predicates.abilities(PartAbility.EXPORT_ITEMS)))
            .where(" ", Predicates.any())
            .build()
    }

    val MATTER_FABRICATOR = Function { definition: MultiblockMachineDefinition ->
        FactoryBlockPattern.start()
            .aisle("bbbbb", "bbbbb", "bbbbb", "bbbbb", "bbbbb")
            .aisle("bbbbb", "bcccb", "bcccb", "bcccb", "bbbbb")
            .aisle("bbbbb", "bcdcb", "bcdcb", "bcdcb", "bbbbb")
            .aisle("bbbbb", "bcccb", "bcccb", "bcccb", "bbbbb")
            .aisle("bbbbb", "bbbbb", "bbabb", "bbbbb", "bbbbb")
            .where("a", Predicates.controller(Predicates.blocks(definition.get())))
            .where("b", Predicates.blocks(GTBlocks.HIGH_POWER_CASING.get())
                .setMinGlobalLimited(90)
                .or(Predicates.autoAbilities(*definition.recipeTypes))
                .or(Predicates.abilities(PartAbility.PARALLEL_HATCH).setMaxGlobalLimited(1))
                .or(Predicates.abilities(PartAbility.INPUT_LASER).setMaxGlobalLimited(1))
                .or(Predicates.abilities(PartAbility.MAINTENANCE).setExactLimit(1))
                .or(Predicates.abilities(GTLAddPartAbility.THREAD_MODIFIER).setMaxGlobalLimited(1)))
            .where("c", Predicates.blocks(GTBlocks.SUPERCONDUCTING_COIL.get()))
            .where("d", Predicates.blocks(GCyMBlocks.ELECTROLYTIC_CELL.get()))
            .build()}
}